<div class="employee-portal">
  <h2 style="text-align: center;">Welcome to Employee Portal</h2>
  
  <p style="color: black; font-weight: bold;">List of Employees</p>
  
  <!-- Global Action Buttons -->
  <div class="global-actions mb-3">
    <button class="btn btn-primary me-2" (click)="openModal()">+ Add Employee</button>
    <button class="btn btn-warning me-2" (click)="editSelectedEmployee()" [disabled]="!selectedEmployeeId">Edit</button>
    <button class="btn btn-danger" (click)="deleteSelectedEmployee()" [disabled]="!selectedEmployeeId">Delete</button>
  </div>
  
  <!-- Employee Grid -->
  <div class="employee-grid">
    <table cellpadding="6" style="border-collapse: collapse; width: 100%; border: 1px solid #ccc;">
      <tr>
        <th style="border: 1px solid #ccc; padding: 6px;">Select</th>
        <th style="border: 1px solid #ccc; padding: 6px;">Employee Name 
          <button (click)="sortEmployees('asc')" style="margin-left: 5px; padding: 2px 5px; font-size: 10px;">↑</button>
          <button (click)="sortEmployees('desc')" style="margin-left: 2px; padding: 2px 5px; font-size: 10px;">↓</button>
        </th>
        <th style="border: 1px solid #ccc; padding: 6px;">Salary</th>
        <th style="border: 1px solid #ccc; padding: 6px;">Department</th>
      </tr>
      <tr *ngFor="let emp of paginatedEmployees">
        <td style="border: 1px solid #ccc; padding: 6px;">
          <input type="radio" name="employeeSelect" [value]="emp.id" [checked]="selectedEmployeeId === emp.id" (change)="selectEmployeeForAction(emp.id)">
        </td>
        <td style="border: 1px solid #ccc; padding: 6px;"><a href="#" (click)="viewEmployeeDetails(emp); $event.preventDefault()" style="color: blue; text-decoration: underline;">{{ emp.name }}</a></td>
        <td style="border: 1px solid #ccc; padding: 6px;">{{ emp.salary | currency }}</td>
        <td style="border: 1px solid #ccc; padding: 6px;">{{ emp.department }}</td>
      </tr>
    </table>
  </div>
  
  <!-- Pagination -->
  <div class="pagination mt-3" style="text-align: center; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);">
    <button class="btn btn-sm btn-secondary" (click)="goToFirstPage()" [disabled]="currentPage === 1" style="margin-right: 5px;">
      ⏮️
    </button>
    <button class="btn btn-sm btn-secondary" (click)="goToPreviousPage()" [disabled]="currentPage === 1" style="margin-right: 5px;">
      ⬅️
    </button>
    <span style="margin: 0 10px; color: #333;">{{ getCurrentRecordRange() }}</span>
    <button class="btn btn-sm btn-secondary" (click)="goToNextPage()" [disabled]="currentPage === totalPages" style="margin-left: 5px;">
      ➡️
    </button>
    <button class="btn btn-sm btn-secondary" (click)="goToLastPage()" [disabled]="currentPage === totalPages" style="margin-left: 5px;">
      ⏭️
    </button>
  </div>

 
  <div *ngIf="showDeleteConfirm" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1050; display: flex; align-items: flex-start; justify-content: center; padding-top: 50px;">
    <div style="background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 400px; width: 90%;">
      <div style="padding: 20px; border-bottom: 1px solid #dee2e6;">
        <h5 style="margin: 0; color: #007bff;">Delete?</h5>
      </div>
      <div style="padding: 20px;">
        <p style="margin: 0; color: #333; font-size: 16px;">Are you sure you want to delete this employee?</p>
      </div>
      <div style="padding: 20px; text-align: right;">
        <button class="btn btn-secondary" (click)="cancelDelete()" style="margin-right: 10px;">Cancel</button>
        <button style="background-color: #dc3545; border-color: #dc3545; color: white; padding: 6px 12px; border-radius: 4px; border: 1px solid transparent; cursor: pointer;" (click)="confirmDelete()">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Employee Details Modal -->
  <div *ngIf="showDetailsModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1050; display: flex; align-items: center; justify-content: center;">
    <div style="background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 500px; width: 90%;">
      <div style="padding: 20px; border-bottom: 1px solid #dee2e6;">
        <h5 style="margin: 0; color: #007bff;">Employee Details</h5>
      </div>
      <div style="padding: 20px;" *ngIf="selectedEmployeeDetails">
        <table style="width: 100%; border-collapse: collapse;">
          <tr>
            <td style="text-align: left; padding: 5px; font-weight: bold;">Name</td>
            <td style="text-align: center; padding: 5px;">:</td>
            <td style="text-align: left; padding: 5px;">{{ selectedEmployeeDetails.name }}</td>
          </tr>
          <tr>
            <td style="text-align: left; padding: 5px; font-weight: bold;">Salary</td>
            <td style="text-align: center; padding: 5px;">:</td>
            <td style="text-align: left; padding: 5px;">{{ selectedEmployeeDetails.salary | currency }}</td>
          </tr>
          <tr>
            <td style="text-align: left; padding: 5px; font-weight: bold;">Department</td>
            <td style="text-align: center; padding: 5px;">:</td>
            <td style="text-align: left; padding: 5px;">{{ selectedEmployeeDetails.department }}</td>
          </tr>
          <tr>
            <td style="text-align: left; padding: 5px; font-weight: bold;">Company</td>
            <td style="text-align: center; padding: 5px;">:</td>
            <td style="text-align: left; padding: 5px;">{{ getCompanyName(selectedEmployeeDetails.companyId || 1) }}</td>
          </tr>
        </table>
      </div>
      <div style="padding: 20px; text-align: right;">
        <button class="btn btn-secondary" (click)="closeDetailsModal()">Close</button>
      </div>
    </div>
  </div>

  <!-- Modal Component -->
  <app-employee-modal
    [showModal]="showModal"
    [isEditMode]="isEditMode"
    [form]="form"
    [companies]="companies"
    (close)="closeModal()"
    (submit)="submitEmployee()"
    (update)="updateEmployee()"
  ></app-employee-modal>
</div>
