<div class="employee-portal">
  <h2>Welcome to Employee Portal</h2>
  
  <!-- Add Employee Button -->
  <button class="btn btn-primary mb-3" (click)="openModal()">+ Add Employee</button>
  
  <div *ngIf="!showGrid">
    <p>List of Employees</p>
    
    <!-- Employee Grid -->
    <div class="employee-grid">
      <table border="1" cellpadding="8" style="border-collapse: collapse; width: 100%;">
        <tr *ngFor="let emp of paginatedEmployees">
          <td>
            <a href="#" (click)="selectEmployee(emp, $event)" style="color: blue; text-decoration: underline;">{{ emp.name }}</a>
          </td>
        </tr>
      </table>
    </div>
    
    <!-- Pagination -->
    <div class="pagination mt-3" style="text-align: center; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);">
      <button 
        *ngFor="let page of [].constructor(totalPages); let i = index" 
        class="btn btn-sm" 
        [class.btn-primary]="currentPage === i + 1"
        [class.btn-secondary]="currentPage !== i + 1"
        (click)="goToPage(i + 1)"
        style="margin-right: 5px;">
        {{ i + 1 }}
      </button>
    </div>
  </div>

  <!-- Employee Details Grid -->
  <div *ngIf="showGrid && selectedEmployee" class="employee-details-grid mt-4">
    <h3>Employee Details</h3>
    
    <!-- Global Action Buttons -->
    <div class="global-actions mb-3">
      <button class="btn btn-warning me-2" (click)="editSelectedEmployee()" [disabled]="!selectedEmployeeId">Edit</button>
      <button class="btn btn-danger" (click)="deleteSelectedEmployee()" [disabled]="!selectedEmployeeId">Delete</button>
    </div>
    
    <table border="1" cellpadding="8" style="border-collapse: collapse; width: 100%;">
      <tr>
        <th>Select</th>
        <th>Employee Name</th>
        <th>Salary</th>
        <th>Department</th>
      </tr>
      <tr>
        <td>
          <input type="radio" name="employeeSelect" [value]="selectedEmployee.id" (change)="selectEmployeeForAction(selectedEmployee.id)">
        </td>
        <td>{{ selectedEmployee.name }}</td>
        <td>{{ selectedEmployee.salary | currency }}</td>
        <td>{{ selectedEmployee.department }}</td>
      </tr>
    </table>
    
    <button class="btn btn-secondary" (click)="showGrid = false" style="margin-top: 20px;">Back to List</button>
  </div>

  <!-- Delete Confirmation Modal -->
  <div *ngIf="showDeleteConfirm" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1050; display: flex; align-items: flex-start; justify-content: center; padding-top: 50px;">
    <div style="background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 400px; width: 90%;">
      <div style="padding: 20px; border-bottom: 1px solid #dee2e6;">
        <h5 style="margin: 0; color: #007bff;">Delete?</h5>
      </div>
      <div style="padding: 20px;">
        <p style="margin: 0; color: #333; font-size: 16px;">Are you sure you want to delete this employee?</p>
      </div>
      <div style="padding: 20px; text-align: right;">
        <button class="btn btn-secondary" (click)="cancelDelete()" style="margin-right: 10px;">Cancel</button>
        <button style="background-color: #dc3545; border-color: #dc3545; color: white; padding: 6px 12px; border-radius: 4px; border: 1px solid transparent; cursor: pointer;" (click)="confirmDelete()">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Modal Component -->
  <app-employee-modal
    [showModal]="showModal"
    [isEditMode]="isEditMode"
    [form]="form"
    [companies]="companies"
    (close)="closeModal()"
    (submit)="submitEmployee()"
    (update)="updateEmployee()"
  ></app-employee-modal>
</div>
